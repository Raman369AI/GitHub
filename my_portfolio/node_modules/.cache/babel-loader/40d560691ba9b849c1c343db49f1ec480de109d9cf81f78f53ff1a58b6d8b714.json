{"ast":null,"code":"'use client';\n\nimport { useSafeLayoutEffect } from '@chakra-ui/hooks';\nimport { useState, useEffect, useRef, useCallback } from 'react';\nfunction useImage(props) {\n  const {\n    loading,\n    src,\n    srcSet,\n    onLoad,\n    onError,\n    crossOrigin,\n    sizes,\n    ignoreFallback\n  } = props;\n  const [status, setStatus] = useState(\"pending\");\n  useEffect(() => {\n    setStatus(src ? \"loading\" : \"pending\");\n  }, [src]);\n  const imageRef = useRef();\n  const load = useCallback(() => {\n    if (!src) return;\n    flush();\n    const img = new Image();\n    img.src = src;\n    if (crossOrigin) img.crossOrigin = crossOrigin;\n    if (srcSet) img.srcset = srcSet;\n    if (sizes) img.sizes = sizes;\n    if (loading) img.loading = loading;\n    img.onload = event => {\n      flush();\n      setStatus(\"loaded\");\n      onLoad?.(event);\n    };\n    img.onerror = error => {\n      flush();\n      setStatus(\"failed\");\n      onError?.(error);\n    };\n    imageRef.current = img;\n  }, [src, crossOrigin, srcSet, sizes, onLoad, onError, loading]);\n  const flush = () => {\n    if (imageRef.current) {\n      imageRef.current.onload = null;\n      imageRef.current.onerror = null;\n      imageRef.current = null;\n    }\n  };\n  useSafeLayoutEffect(() => {\n    if (ignoreFallback) return void 0;\n    if (status === \"loading\") {\n      load();\n    }\n    return () => {\n      flush();\n    };\n  }, [status, load, ignoreFallback]);\n  return ignoreFallback ? \"loaded\" : status;\n}\nconst shouldShowFallbackImage = (status, fallbackStrategy) => status !== \"loaded\" && fallbackStrategy === \"beforeLoadOrError\" || status === \"failed\" && fallbackStrategy === \"onError\";\nexport { shouldShowFallbackImage, useImage };","map":{"version":3,"names":["useSafeLayoutEffect","useState","useEffect","useRef","useCallback","useImage","props","loading","src","srcSet","onLoad","onError","crossOrigin","sizes","ignoreFallback","status","setStatus","imageRef","load","flush","img","Image","srcset","onload","event","onerror","error","current","shouldShowFallbackImage","fallbackStrategy"],"sources":["/home/coder/project/reactlab/node_modules/@chakra-ui/react/dist/esm/image/use-image.mjs"],"sourcesContent":["'use client';\nimport { useSafeLayoutEffect } from '@chakra-ui/hooks';\nimport { useState, useEffect, useRef, useCallback } from 'react';\n\nfunction useImage(props) {\n  const {\n    loading,\n    src,\n    srcSet,\n    onLoad,\n    onError,\n    crossOrigin,\n    sizes,\n    ignoreFallback\n  } = props;\n  const [status, setStatus] = useState(\"pending\");\n  useEffect(() => {\n    setStatus(src ? \"loading\" : \"pending\");\n  }, [src]);\n  const imageRef = useRef();\n  const load = useCallback(() => {\n    if (!src)\n      return;\n    flush();\n    const img = new Image();\n    img.src = src;\n    if (crossOrigin)\n      img.crossOrigin = crossOrigin;\n    if (srcSet)\n      img.srcset = srcSet;\n    if (sizes)\n      img.sizes = sizes;\n    if (loading)\n      img.loading = loading;\n    img.onload = (event) => {\n      flush();\n      setStatus(\"loaded\");\n      onLoad?.(event);\n    };\n    img.onerror = (error) => {\n      flush();\n      setStatus(\"failed\");\n      onError?.(error);\n    };\n    imageRef.current = img;\n  }, [src, crossOrigin, srcSet, sizes, onLoad, onError, loading]);\n  const flush = () => {\n    if (imageRef.current) {\n      imageRef.current.onload = null;\n      imageRef.current.onerror = null;\n      imageRef.current = null;\n    }\n  };\n  useSafeLayoutEffect(() => {\n    if (ignoreFallback)\n      return void 0;\n    if (status === \"loading\") {\n      load();\n    }\n    return () => {\n      flush();\n    };\n  }, [status, load, ignoreFallback]);\n  return ignoreFallback ? \"loaded\" : status;\n}\nconst shouldShowFallbackImage = (status, fallbackStrategy) => status !== \"loaded\" && fallbackStrategy === \"beforeLoadOrError\" || status === \"failed\" && fallbackStrategy === \"onError\";\n\nexport { shouldShowFallbackImage, useImage };\n"],"mappings":"AAAA,YAAY;;AACZ,SAASA,mBAAmB,QAAQ,kBAAkB;AACtD,SAASC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,WAAW,QAAQ,OAAO;AAEhE,SAASC,QAAQA,CAACC,KAAK,EAAE;EACvB,MAAM;IACJC,OAAO;IACPC,GAAG;IACHC,MAAM;IACNC,MAAM;IACNC,OAAO;IACPC,WAAW;IACXC,KAAK;IACLC;EACF,CAAC,GAAGR,KAAK;EACT,MAAM,CAACS,MAAM,EAAEC,SAAS,CAAC,GAAGf,QAAQ,CAAC,SAAS,CAAC;EAC/CC,SAAS,CAAC,MAAM;IACdc,SAAS,CAACR,GAAG,GAAG,SAAS,GAAG,SAAS,CAAC;EACxC,CAAC,EAAE,CAACA,GAAG,CAAC,CAAC;EACT,MAAMS,QAAQ,GAAGd,MAAM,CAAC,CAAC;EACzB,MAAMe,IAAI,GAAGd,WAAW,CAAC,MAAM;IAC7B,IAAI,CAACI,GAAG,EACN;IACFW,KAAK,CAAC,CAAC;IACP,MAAMC,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;IACvBD,GAAG,CAACZ,GAAG,GAAGA,GAAG;IACb,IAAII,WAAW,EACbQ,GAAG,CAACR,WAAW,GAAGA,WAAW;IAC/B,IAAIH,MAAM,EACRW,GAAG,CAACE,MAAM,GAAGb,MAAM;IACrB,IAAII,KAAK,EACPO,GAAG,CAACP,KAAK,GAAGA,KAAK;IACnB,IAAIN,OAAO,EACTa,GAAG,CAACb,OAAO,GAAGA,OAAO;IACvBa,GAAG,CAACG,MAAM,GAAIC,KAAK,IAAK;MACtBL,KAAK,CAAC,CAAC;MACPH,SAAS,CAAC,QAAQ,CAAC;MACnBN,MAAM,GAAGc,KAAK,CAAC;IACjB,CAAC;IACDJ,GAAG,CAACK,OAAO,GAAIC,KAAK,IAAK;MACvBP,KAAK,CAAC,CAAC;MACPH,SAAS,CAAC,QAAQ,CAAC;MACnBL,OAAO,GAAGe,KAAK,CAAC;IAClB,CAAC;IACDT,QAAQ,CAACU,OAAO,GAAGP,GAAG;EACxB,CAAC,EAAE,CAACZ,GAAG,EAAEI,WAAW,EAAEH,MAAM,EAAEI,KAAK,EAAEH,MAAM,EAAEC,OAAO,EAAEJ,OAAO,CAAC,CAAC;EAC/D,MAAMY,KAAK,GAAGA,CAAA,KAAM;IAClB,IAAIF,QAAQ,CAACU,OAAO,EAAE;MACpBV,QAAQ,CAACU,OAAO,CAACJ,MAAM,GAAG,IAAI;MAC9BN,QAAQ,CAACU,OAAO,CAACF,OAAO,GAAG,IAAI;MAC/BR,QAAQ,CAACU,OAAO,GAAG,IAAI;IACzB;EACF,CAAC;EACD3B,mBAAmB,CAAC,MAAM;IACxB,IAAIc,cAAc,EAChB,OAAO,KAAK,CAAC;IACf,IAAIC,MAAM,KAAK,SAAS,EAAE;MACxBG,IAAI,CAAC,CAAC;IACR;IACA,OAAO,MAAM;MACXC,KAAK,CAAC,CAAC;IACT,CAAC;EACH,CAAC,EAAE,CAACJ,MAAM,EAAEG,IAAI,EAAEJ,cAAc,CAAC,CAAC;EAClC,OAAOA,cAAc,GAAG,QAAQ,GAAGC,MAAM;AAC3C;AACA,MAAMa,uBAAuB,GAAGA,CAACb,MAAM,EAAEc,gBAAgB,KAAKd,MAAM,KAAK,QAAQ,IAAIc,gBAAgB,KAAK,mBAAmB,IAAId,MAAM,KAAK,QAAQ,IAAIc,gBAAgB,KAAK,SAAS;AAEtL,SAASD,uBAAuB,EAAEvB,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}